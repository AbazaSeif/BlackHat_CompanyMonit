<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>BOB: net/i2p/BOB/BOB.java Source File</title>
<link href="BOB:%20net_i2p_BOB_BOB.java%20Source%20File_files/doxygen.css" rel="stylesheet" type="text/css">
<link href="BOB:%20net_i2p_BOB_BOB.java%20Source%20File_files/tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="http://echelon.i2p.xyz/docs/BOB-doc/main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="http://echelon.i2p.xyz/docs/BOB-doc/namespaces.html"><span>Packages</span></a></li>
      <li><a href="http://echelon.i2p.xyz/docs/BOB-doc/annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="http://echelon.i2p.xyz/docs/BOB-doc/files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>net/i2p/BOB/BOB.java</h1><a href="http://echelon.i2p.xyz/docs/BOB-doc/BOB_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00024"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/namespacenet_1_1i2p_1_1BOB.html">00024</a> <span class="keyword">package </span>net.i2p.xyz.BOB;
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="keyword">import</span> java.io.File;
<a name="l00027"></a>00027 <span class="keyword">import</span> java.io.FileInputStream;
<a name="l00028"></a>00028 <span class="keyword">import</span> java.io.FileNotFoundException;
<a name="l00029"></a>00029 <span class="keyword">import</span> java.io.FileOutputStream;
<a name="l00030"></a>00030 <span class="keyword">import</span> java.io.IOException;
<a name="l00031"></a>00031 <span class="keyword">import</span> java.net.ConnectException;
<a name="l00032"></a>00032 <span class="keyword">import</span> java.net.InetAddress;
<a name="l00033"></a>00033 <span class="keyword">import</span> java.net.ServerSocket;
<a name="l00034"></a>00034 <span class="keyword">import</span> java.net.Socket;
<a name="l00035"></a>00035 <span class="keyword">import</span> java.net.SocketTimeoutException;
<a name="l00036"></a>00036 <span class="keyword">import</span> java.util.Properties;
<a name="l00037"></a>00037 <span class="keyword">import</span> java.util.concurrent.atomic.AtomicBoolean;
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="keyword">import</span> net.i2p.xyz.I2PAppContext;
<a name="l00040"></a>00040 <span class="keyword">import</span> net.i2p.xyz.client.I2PClient;
<a name="l00041"></a>00041 <span class="keyword">import</span> net.i2p.xyz.client.streaming.RetransmissionTimer;
<a name="l00042"></a>00042 <span class="keyword">import</span> net.i2p.xyz.util.Log;
<a name="l00043"></a>00043 <span class="keyword">import</span> net.i2p.xyz.util.SimpleScheduler;
<a name="l00044"></a>00044 <span class="keyword">import</span> net.i2p.xyz.util.SimpleTimer2;
<a name="l00045"></a>00045 
<a name="l00117"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html">00117</a> <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html">BOB</a> {
<a name="l00118"></a>00118 
<a name="l00119"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#0f8b417d16dd415267063d6f8a534afe">00119</a>         <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Log <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#0f8b417d16dd415267063d6f8a534afe">_log</a> = <span class="keyword">new</span> Log(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html">BOB</a>.class);
<a name="l00120"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#ffc344e84b40a556c9d6e1145c83912a">00120</a>         <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#ffc344e84b40a556c9d6e1145c83912a">PROP_CONFIG_LOCATION</a> = <span class="stringliteral">"BOB.config"</span>;
<a name="l00121"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#14430b96f5b736ed60435906803f7e45">00121</a>         <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#14430b96f5b736ed60435906803f7e45">PROP_BOB_PORT</a> = <span class="stringliteral">"BOB.port"</span>;
<a name="l00122"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#96369819f7929ef66bd6042077980b11">00122</a>         <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#96369819f7929ef66bd6042077980b11">PROP_BOB_HOST</a> = <span class="stringliteral">"BOB.host"</span>;
<a name="l00123"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">00123</a>         <span class="keyword">private</span> <span class="keyword">static</span> <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html">NamedDB</a> <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">database</a>;
<a name="l00124"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">00124</a>         <span class="keyword">private</span> <span class="keyword">static</span> Properties <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a> = <span class="keyword">new</span> Properties();
<a name="l00125"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#364abf5f36383a0047069ae2f00786eb">00125</a>         <span class="keyword">private</span> <span class="keyword">static</span> AtomicBoolean <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#364abf5f36383a0047069ae2f00786eb">spin</a> = <span class="keyword">new</span> AtomicBoolean(<span class="keyword">true</span>);
<a name="l00126"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#97b2cab6422eda96aceeb78bad2ddc0a">00126</a>         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#97b2cab6422eda96aceeb78bad2ddc0a">P_RUNNING</a> = <span class="stringliteral">"RUNNING"</span>;
<a name="l00127"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#4a0f0bb8110eacc37fa0b12715ce6b0f">00127</a>         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#4a0f0bb8110eacc37fa0b12715ce6b0f">P_STARTING</a> = <span class="stringliteral">"STARTING"</span>;
<a name="l00128"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#ede6a495b8c5f54bcb69642000658934">00128</a>         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#ede6a495b8c5f54bcb69642000658934">P_STOPPING</a> = <span class="stringliteral">"STOPPING"</span>;
<a name="l00129"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#7f8868babe2ac7cde935c4380763ae83">00129</a>         <span class="keyword">private</span> <span class="keyword">static</span> AtomicBoolean <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#7f8868babe2ac7cde935c4380763ae83">lock</a> = <span class="keyword">new</span> AtomicBoolean(<span class="keyword">false</span>);
<a name="l00130"></a>00130         <span class="comment">// no longer used.</span>
<a name="l00131"></a>00131         <span class="comment">// private static int maxConnections = 0;</span>
<a name="l00132"></a>00132 
<a name="l00138"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#0f727256b5132a23d40e0b24721c2a2c">00138</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#0f727256b5132a23d40e0b24721c2a2c">info</a>(String arg) {
<a name="l00139"></a>00139                 System.out.println(<span class="stringliteral">"INFO:"</span> + arg);
<a name="l00140"></a>00140                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#0f8b417d16dd415267063d6f8a534afe">_log</a>.info(arg);
<a name="l00141"></a>00141         }
<a name="l00142"></a>00142 
<a name="l00148"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#fcdd219ece39867c045662bd3ecf7e85">00148</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#fcdd219ece39867c045662bd3ecf7e85">warn</a>(String arg) {
<a name="l00149"></a>00149                 System.out.println(<span class="stringliteral">"WARNING:"</span> + arg);
<a name="l00150"></a>00150                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#0f8b417d16dd415267063d6f8a534afe">_log</a>.warn(arg);
<a name="l00151"></a>00151         }
<a name="l00152"></a>00152 
<a name="l00158"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#fd5f39eb5b3c84647c254c54f02e3141">00158</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#fd5f39eb5b3c84647c254c54f02e3141">error</a>(String arg) {
<a name="l00159"></a>00159                 System.out.println(<span class="stringliteral">"ERROR: "</span> + arg);
<a name="l00160"></a>00160                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#0f8b417d16dd415267063d6f8a534afe">_log</a>.error(arg);
<a name="l00161"></a>00161         }
<a name="l00162"></a>00162 
<a name="l00166"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#6859672d9f01f2a51916018ed217e57d">00166</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#6859672d9f01f2a51916018ed217e57d">stop</a>() {
<a name="l00167"></a>00167                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#364abf5f36383a0047069ae2f00786eb">spin</a>.set(<span class="keyword">false</span>);
<a name="l00168"></a>00168         }
<a name="l00169"></a>00169 
<a name="l00175"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#5741252fb691a4b24b8f5abaa8bae75a">00175</a>         <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#5741252fb691a4b24b8f5abaa8bae75a">main</a>(String[] args) {
<a name="l00176"></a>00176                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">database</a> = <span class="keyword">new</span> <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html">NamedDB</a>();
<a name="l00177"></a>00177                 ServerSocket listener = null;
<a name="l00178"></a>00178                 <span class="keywordtype">int</span> i = 0;
<a name="l00179"></a>00179                 <span class="keywordtype">boolean</span> save = <span class="keyword">false</span>;
<a name="l00180"></a>00180                 <span class="comment">// Set up all defaults to be passed forward to other threads.</span>
<a name="l00181"></a>00181                 <span class="comment">// Re-reading the config file in each thread is pretty damn stupid.</span>
<a name="l00182"></a>00182                 String configLocation = System.getProperty(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#ffc344e84b40a556c9d6e1145c83912a">PROP_CONFIG_LOCATION</a>, <span class="stringliteral">"bob.config"</span>);
<a name="l00183"></a>00183                 <span class="comment">// This is here just to ensure there is no interference with our threadgroups.</span>
<a name="l00184"></a>00184                 RetransmissionTimer Y = RetransmissionTimer.getInstance();
<a name="l00185"></a>00185                 SimpleScheduler Y1 = SimpleScheduler.getInstance();
<a name="l00186"></a>00186                 SimpleTimer2 Y2 = SimpleTimer2.getInstance();
<a name="l00187"></a>00187                 i = Y.hashCode();
<a name="l00188"></a>00188                 i = Y1.hashCode();
<a name="l00189"></a>00189                 i = Y2.hashCode();
<a name="l00190"></a>00190                 <span class="keywordflow">try</span> {
<a name="l00191"></a>00191                         {
<a name="l00192"></a>00192                                 File cfg = <span class="keyword">new</span> File(configLocation);
<a name="l00193"></a>00193                                 <span class="keywordflow">if</span> (!cfg.isAbsolute()) {
<a name="l00194"></a>00194                                         cfg = <span class="keyword">new</span> File(I2PAppContext.getGlobalContext().getConfigDir(), configLocation);
<a name="l00195"></a>00195                                 }
<a name="l00196"></a>00196                                 <span class="keywordflow">try</span> {
<a name="l00197"></a>00197                                         FileInputStream fi = <span class="keyword">new</span> FileInputStream(cfg);
<a name="l00198"></a>00198                                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.load(fi);
<a name="l00199"></a>00199                                         fi.close();
<a name="l00200"></a>00200                                 } <span class="keywordflow">catch</span> (FileNotFoundException fnfe) {
<a name="l00201"></a>00201                                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#fcdd219ece39867c045662bd3ecf7e85">warn</a>(<span class="stringliteral">"Unable to load up the BOB config file "</span> + cfg.getAbsolutePath() + <span class="stringliteral">", Using defaults."</span>);
<a name="l00202"></a>00202                                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#fcdd219ece39867c045662bd3ecf7e85">warn</a>(fnfe.toString());
<a name="l00203"></a>00203                                         save = <span class="keyword">true</span>;
<a name="l00204"></a>00204                                 } <span class="keywordflow">catch</span> (IOException ioe) {
<a name="l00205"></a>00205                                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#fcdd219ece39867c045662bd3ecf7e85">warn</a>(<span class="stringliteral">"IOException on BOB config file "</span> + cfg.getAbsolutePath() + <span class="stringliteral">", using defaults."</span>);
<a name="l00206"></a>00206                                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#fcdd219ece39867c045662bd3ecf7e85">warn</a>(ioe.toString());
<a name="l00207"></a>00207                                 }
<a name="l00208"></a>00208                         }
<a name="l00209"></a>00209                         <span class="comment">// Global router and client API configurations that are missing are set to defaults here.</span>
<a name="l00210"></a>00210                         <span class="keywordflow">if</span> (!<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.containsKey(I2PClient.PROP_TCP_HOST)) {
<a name="l00211"></a>00211                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.setProperty(I2PClient.PROP_TCP_HOST, <span class="stringliteral">"localhost"</span>);
<a name="l00212"></a>00212                         }
<a name="l00213"></a>00213                         <span class="keywordflow">if</span> (!<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.containsKey(I2PClient.PROP_TCP_PORT)) {
<a name="l00214"></a>00214                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.setProperty(I2PClient.PROP_TCP_PORT, <span class="stringliteral">"7654"</span>);
<a name="l00215"></a>00215                         }
<a name="l00216"></a>00216                         <span class="keywordflow">if</span> (!<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.containsKey(I2PClient.PROP_RELIABILITY)) {
<a name="l00217"></a>00217                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.setProperty(I2PClient.PROP_RELIABILITY, I2PClient.PROP_RELIABILITY_BEST_EFFORT);
<a name="l00218"></a>00218                         }
<a name="l00219"></a>00219                         <span class="keywordflow">if</span> (!<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.containsKey(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#14430b96f5b736ed60435906803f7e45">PROP_BOB_PORT</a>)) {
<a name="l00220"></a>00220                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.setProperty(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#14430b96f5b736ed60435906803f7e45">PROP_BOB_PORT</a>, <span class="stringliteral">"2827"</span>); <span class="comment">// 0xB0B</span>
<a name="l00221"></a>00221                         }
<a name="l00222"></a>00222                         <span class="keywordflow">if</span> (!<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.containsKey(<span class="stringliteral">"inbound.length"</span>)) {
<a name="l00223"></a>00223                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.setProperty(<span class="stringliteral">"inbound.length"</span>, <span class="stringliteral">"1"</span>);
<a name="l00224"></a>00224                         }
<a name="l00225"></a>00225                         <span class="keywordflow">if</span> (!<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.containsKey(<span class="stringliteral">"outbound.length"</span>)) {
<a name="l00226"></a>00226                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.setProperty(<span class="stringliteral">"outbound.length"</span>, <span class="stringliteral">"1"</span>);
<a name="l00227"></a>00227                         }
<a name="l00228"></a>00228                         <span class="keywordflow">if</span> (!<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.containsKey(<span class="stringliteral">"inbound.lengthVariance"</span>)) {
<a name="l00229"></a>00229                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.setProperty(<span class="stringliteral">"inbound.lengthVariance"</span>, <span class="stringliteral">"0"</span>);
<a name="l00230"></a>00230                         }
<a name="l00231"></a>00231                         <span class="keywordflow">if</span> (!<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.containsKey(<span class="stringliteral">"outbound.lengthVariance"</span>)) {
<a name="l00232"></a>00232                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.setProperty(<span class="stringliteral">"outbound.lengthVariance"</span>, <span class="stringliteral">"0"</span>);
<a name="l00233"></a>00233                         }
<a name="l00234"></a>00234                         <span class="keywordflow">if</span> (!<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.containsKey(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#96369819f7929ef66bd6042077980b11">PROP_BOB_HOST</a>)) {
<a name="l00235"></a>00235                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.setProperty(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#96369819f7929ef66bd6042077980b11">PROP_BOB_HOST</a>, <span class="stringliteral">"localhost"</span>);
<a name="l00236"></a>00236                         }
<a name="l00237"></a>00237                         <span class="keywordflow">if</span> (save) {
<a name="l00238"></a>00238                                 File cfg = <span class="keyword">new</span> File(configLocation);
<a name="l00239"></a>00239                                 <span class="keywordflow">if</span> (!cfg.isAbsolute()) {
<a name="l00240"></a>00240                                         cfg = <span class="keyword">new</span> File(I2PAppContext.getGlobalContext().getConfigDir(), configLocation);
<a name="l00241"></a>00241                                 }
<a name="l00242"></a>00242                                 <span class="keywordflow">try</span> {
<a name="l00243"></a>00243                                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#fcdd219ece39867c045662bd3ecf7e85">warn</a>(<span class="stringliteral">"Writing new defaults file "</span> + cfg.getAbsolutePath());
<a name="l00244"></a>00244                                         FileOutputStream fo = <span class="keyword">new</span> FileOutputStream(cfg);
<a name="l00245"></a>00245                                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.store(fo, cfg.getAbsolutePath());
<a name="l00246"></a>00246                                         fo.close();
<a name="l00247"></a>00247                                 } <span class="keywordflow">catch</span> (IOException ioe) {
<a name="l00248"></a>00248                                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#fd5f39eb5b3c84647c254c54f02e3141">error</a>(<span class="stringliteral">"IOException on BOB config file "</span> + cfg.getAbsolutePath() + <span class="stringliteral">", "</span> + ioe);
<a name="l00249"></a>00249                                 }
<a name="l00250"></a>00250                         }
<a name="l00251"></a>00251 
<a name="l00252"></a>00252                         i = 0;
<a name="l00253"></a>00253                         <span class="keywordtype">boolean</span> g = <span class="keyword">false</span>;
<a name="l00254"></a>00254                         <span class="keywordflow">try</span> {
<a name="l00255"></a>00255                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#0f727256b5132a23d40e0b24721c2a2c">info</a>(<span class="stringliteral">"BOB is now running."</span>);
<a name="l00256"></a>00256                                 listener = <span class="keyword">new</span> ServerSocket(Integer.parseInt(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.getProperty(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#14430b96f5b736ed60435906803f7e45">PROP_BOB_PORT</a>)), 10, InetAddress.getByName(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>.getProperty(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#96369819f7929ef66bd6042077980b11">PROP_BOB_HOST</a>)));
<a name="l00257"></a>00257                                 Socket server = null;
<a name="l00258"></a>00258                                 listener.setSoTimeout(500); <span class="comment">// .5 sec</span>
<a name="l00259"></a>00259                                 <span class="keywordflow">while</span> (<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#364abf5f36383a0047069ae2f00786eb">spin</a>.get()) {
<a name="l00260"></a>00260                                         <span class="comment">//DoCMDS connection;</span>
<a name="l00261"></a>00261 
<a name="l00262"></a>00262                                         <span class="keywordflow">try</span> {
<a name="l00263"></a>00263                                                 server = listener.accept();
<a name="l00264"></a>00264                                                 g = <span class="keyword">true</span>;
<a name="l00265"></a>00265                                         } <span class="keywordflow">catch</span> (ConnectException ce) {
<a name="l00266"></a>00266                                                 g = <span class="keyword">false</span>;
<a name="l00267"></a>00267                                         } <span class="keywordflow">catch</span> (SocketTimeoutException ste) {
<a name="l00268"></a>00268                                                 g = <span class="keyword">false</span>;
<a name="l00269"></a>00269                                         }
<a name="l00270"></a>00270 
<a name="l00271"></a>00271                                         <span class="keywordflow">if</span> (g) {
<a name="l00272"></a>00272                                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1DoCMDS.html">DoCMDS</a> conn_c = <span class="keyword">new</span> <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1DoCMDS.html">DoCMDS</a>(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#364abf5f36383a0047069ae2f00786eb">spin</a>, <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#7f8868babe2ac7cde935c4380763ae83">lock</a>, server, <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#1e7b51133987778d0854cadc63f4cf90">props</a>, <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">database</a>, <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#0f8b417d16dd415267063d6f8a534afe">_log</a>);
<a name="l00273"></a>00273                                                 Thread t = <span class="keyword">new</span> Thread(conn_c);
<a name="l00274"></a>00274                                                 t.setName(<span class="stringliteral">"BOB.DoCMDS "</span> + i);
<a name="l00275"></a>00275                                                 t.start();
<a name="l00276"></a>00276                                                 i++;
<a name="l00277"></a>00277                                         }
<a name="l00278"></a>00278                                 }
<a name="l00279"></a>00279                         } <span class="keywordflow">catch</span> (IOException ioe) {
<a name="l00280"></a>00280                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#fd5f39eb5b3c84647c254c54f02e3141">error</a>(<span class="stringliteral">"IOException on socket listen: "</span> + ioe);
<a name="l00281"></a>00281                                 ioe.printStackTrace();
<a name="l00282"></a>00282                         }
<a name="l00283"></a>00283                 } <span class="keywordflow">finally</span> {
<a name="l00284"></a>00284                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#0f727256b5132a23d40e0b24721c2a2c">info</a>(<span class="stringliteral">"BOB is now shutting down..."</span>);
<a name="l00285"></a>00285                         <span class="comment">// Clean up everything.</span>
<a name="l00286"></a>00286                         <span class="keywordflow">try</span> {
<a name="l00287"></a>00287                                 listener.close();
<a name="l00288"></a>00288                         } <span class="keywordflow">catch</span> (Exception ex) {
<a name="l00289"></a>00289                                 <span class="comment">// nop</span>
<a name="l00290"></a>00290                         }
<a name="l00291"></a>00291                         <span class="comment">// Find all our "BOB.DoCMDS" threads, wait for them to be finished.</span>
<a name="l00292"></a>00292                         <span class="comment">// We could order them to stop, but that could cause nasty issues in the locks.</span>
<a name="l00293"></a>00293                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#86720c7cd845c198423d0f728da6f501">visitAllThreads</a>();
<a name="l00294"></a>00294                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">database</a>.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#c0d495122431ad1e683710f3315f502f">getReadLock</a>();
<a name="l00295"></a>00295                         <span class="keywordtype">int</span> all = <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">database</a>.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#e1f935891275d8c5ad638594b1b1272f">getcount</a>();
<a name="l00296"></a>00296                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">database</a>.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#1a19e1b59a2c9789cc58ce65a6c9770c">releaseReadLock</a>();
<a name="l00297"></a>00297                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html">NamedDB</a> nickinfo;
<a name="l00298"></a>00298                         <span class="keywordflow">for</span> (i = 0; i &lt; all; i++) {
<a name="l00299"></a>00299                                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">database</a>.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#c0d495122431ad1e683710f3315f502f">getReadLock</a>();
<a name="l00300"></a>00300                                 nickinfo = (<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html">NamedDB</a>) <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">database</a>.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#8cbe143514d3f5749f6e27e382c196e1">getnext</a>(i);
<a name="l00301"></a>00301                                 nickinfo.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#c0d495122431ad1e683710f3315f502f">getReadLock</a>();
<a name="l00302"></a>00302                                 <span class="keywordflow">if</span> (nickinfo.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#e118aaf9529e85e467ef7930164fbdb9">get</a>(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#97b2cab6422eda96aceeb78bad2ddc0a">P_RUNNING</a>).equals(Boolean.TRUE) &amp;&amp; nickinfo.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#e118aaf9529e85e467ef7930164fbdb9">get</a>(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#ede6a495b8c5f54bcb69642000658934">P_STOPPING</a>).equals(Boolean.FALSE) &amp;&amp; nickinfo.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#e118aaf9529e85e467ef7930164fbdb9">get</a>(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#4a0f0bb8110eacc37fa0b12715ce6b0f">P_STARTING</a>).equals(Boolean.FALSE)) {
<a name="l00303"></a>00303                                         nickinfo.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#1a19e1b59a2c9789cc58ce65a6c9770c">releaseReadLock</a>();
<a name="l00304"></a>00304                                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">database</a>.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#1a19e1b59a2c9789cc58ce65a6c9770c">releaseReadLock</a>();
<a name="l00305"></a>00305                                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">database</a>.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#285670ea3d0074aa9970abd861be934f">getWriteLock</a>();
<a name="l00306"></a>00306                                         nickinfo.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#285670ea3d0074aa9970abd861be934f">getWriteLock</a>();
<a name="l00307"></a>00307                                         nickinfo.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#0490cbeeaa2986c7a1e77bf204a55573">add</a>(<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#ede6a495b8c5f54bcb69642000658934">P_STOPPING</a>, <span class="keyword">new</span> Boolean(<span class="keyword">true</span>));
<a name="l00308"></a>00308                                         nickinfo.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#145949b63eaac9f89f941a1214c237f8">releaseWriteLock</a>();
<a name="l00309"></a>00309                                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">database</a>.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#145949b63eaac9f89f941a1214c237f8">releaseWriteLock</a>();
<a name="l00310"></a>00310                                 } <span class="keywordflow">else</span> {
<a name="l00311"></a>00311                                         nickinfo.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#1a19e1b59a2c9789cc58ce65a6c9770c">releaseReadLock</a>();
<a name="l00312"></a>00312                                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#9530b107981765e84bdede10f03fd580">database</a>.<a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1NamedDB.html#1a19e1b59a2c9789cc58ce65a6c9770c">releaseReadLock</a>();
<a name="l00313"></a>00313                                 }
<a name="l00314"></a>00314                         }
<a name="l00315"></a>00315                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#0f727256b5132a23d40e0b24721c2a2c">info</a>(<span class="stringliteral">"BOB is now stopped."</span>);
<a name="l00316"></a>00316 
<a name="l00317"></a>00317                 }
<a name="l00318"></a>00318         }
<a name="l00319"></a>00319 
<a name="l00325"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#86720c7cd845c198423d0f728da6f501">00325</a>         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#86720c7cd845c198423d0f728da6f501">visitAllThreads</a>() {
<a name="l00326"></a>00326                 ThreadGroup root = Thread.currentThread().getThreadGroup().getParent();
<a name="l00327"></a>00327                 <span class="keywordflow">while</span> (root.getParent() != null) {
<a name="l00328"></a>00328                         root = root.getParent();
<a name="l00329"></a>00329                 }
<a name="l00330"></a>00330 
<a name="l00331"></a>00331                 <span class="comment">// Visit each thread group</span>
<a name="l00332"></a>00332                 <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#7e6a20eeb86a75d714214e52ff2e4d72">waitjoin</a>(root, 0, root.getName());
<a name="l00333"></a>00333         }
<a name="l00334"></a>00334 
<a name="l00335"></a><a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#7e6a20eeb86a75d714214e52ff2e4d72">00335</a>         <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#7e6a20eeb86a75d714214e52ff2e4d72">waitjoin</a>(ThreadGroup group, <span class="keywordtype">int</span> level, String tn) {
<a name="l00336"></a>00336                 <span class="comment">// Get threads in `group'</span>
<a name="l00337"></a>00337                 <span class="keywordtype">int</span> numThreads = group.activeCount();
<a name="l00338"></a>00338                 Thread[] threads = <span class="keyword">new</span> Thread[numThreads * 2];
<a name="l00339"></a>00339                 numThreads = group.enumerate(threads, <span class="keyword">false</span>);
<a name="l00340"></a>00340                 <span class="comment">// Enumerate each thread in `group' and wait for it to stop if it is one of ours.</span>
<a name="l00341"></a>00341                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numThreads; i++) {
<a name="l00342"></a>00342                         <span class="comment">// Get thread</span>
<a name="l00343"></a>00343                         Thread thread = threads[i];
<a name="l00344"></a>00344                         <span class="keywordflow">if</span> (thread.getName().startsWith(<span class="stringliteral">"BOB.DoCMDS "</span>)) {
<a name="l00345"></a>00345                                 <span class="keywordflow">try</span> {
<a name="l00346"></a>00346                                         <span class="keywordflow">if</span> (thread.isAlive()) {
<a name="l00347"></a>00347                                                 <span class="keywordflow">try</span> {
<a name="l00348"></a>00348                                                         thread.join();
<a name="l00349"></a>00349                                                 } <span class="keywordflow">catch</span> (InterruptedException ex) {
<a name="l00350"></a>00350                                                 }
<a name="l00351"></a>00351                                         }
<a name="l00352"></a>00352                                 } <span class="keywordflow">catch</span> (SecurityException se) {
<a name="l00353"></a>00353                                         <span class="comment">//nop</span>
<a name="l00354"></a>00354                                 }
<a name="l00355"></a>00355                         }
<a name="l00356"></a>00356                 }
<a name="l00357"></a>00357 
<a name="l00358"></a>00358                 <span class="comment">// Get thread subgroups of `group'</span>
<a name="l00359"></a>00359                 <span class="keywordtype">int</span> numGroups = group.activeGroupCount();
<a name="l00360"></a>00360                 ThreadGroup[] groups = <span class="keyword">new</span> ThreadGroup[numGroups * 2];
<a name="l00361"></a>00361                 numGroups = group.enumerate(groups, <span class="keyword">false</span>);
<a name="l00362"></a>00362 
<a name="l00363"></a>00363                 <span class="comment">// Recursively visit each subgroup</span>
<a name="l00364"></a>00364                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; numGroups; i++) {
<a name="l00365"></a>00365                         <a class="code" href="http://echelon.i2p.xyz/docs/BOB-doc/classnet_1_1i2p_1_1BOB_1_1BOB.html#7e6a20eeb86a75d714214e52ff2e4d72">waitjoin</a>(groups[i], level + 1, groups[i].getName());
<a name="l00366"></a>00366                 }
<a name="l00367"></a>00367         }
<a name="l00368"></a>00368 }
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Jan 9 23:04:43 2010 for BOB by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="BOB:%20net_i2p_BOB_BOB.java%20Source%20File_files/doxygen.png" alt="doxygen" border="0" align="middle"></a> 1.5.6 </small></address>


</body></html>